(self["webpackChunkprotezione_civile"]=self["webpackChunkprotezione_civile"]||[]).push([[281],{8457:function(t,e,n){"use strict";var r=n(7854),i=n(9974),o=n(6916),a=n(7908),s=n(3411),u=n(7659),c=n(4411),l=n(6244),d=n(6135),f=n(8554),p=n(1246),v=r.Array;t.exports=function(t){var e=a(t),n=c(this),r=arguments.length,g=r>1?arguments[1]:void 0,h=void 0!==g;h&&(g=i(g,r>2?arguments[2]:void 0));var y,x,b,m,w,I,R=p(e),S=0;if(!R||this==v&&u(R))for(y=l(e),x=n?new this(y):v(y);y>S;S++)I=h?g(e[S],S):e[S],d(x,S,I);else for(m=f(e,R),w=m.next,x=n?new this:[];!(b=o(w,m)).done;S++)I=h?s(m,g,[b.value,S],!0):b.value,d(x,S,I);return x.length=S,x}},3411:function(t,e,n){var r=n(9670),i=n(9212);t.exports=function(t,e,n,o){try{return o?e(r(n)[0],n[1]):e(n)}catch(a){i(t,"throw",a)}}},2261:function(t,e,n){"use strict";var r=n(6916),i=n(1702),o=n(1340),a=n(7066),s=n(2999),u=n(2309),c=n(30),l=n(9909).get,d=n(9441),f=n(7168),p=u("native-string-replace",String.prototype.replace),v=RegExp.prototype.exec,g=v,h=i("".charAt),y=i("".indexOf),x=i("".replace),b=i("".slice),m=function(){var t=/a/,e=/b*/g;return r(v,t,"a"),r(v,e,"a"),0!==t.lastIndex||0!==e.lastIndex}(),w=s.BROKEN_CARET,I=void 0!==/()??/.exec("")[1],R=m||I||w||d||f;R&&(g=function(t){var e,n,i,s,u,d,f,R=this,S=l(R),k=o(t),E=S.raw;if(E)return E.lastIndex=R.lastIndex,e=r(g,E,k),R.lastIndex=E.lastIndex,e;var Z=S.groups,A=w&&R.sticky,O=r(a,R),T=R.source,_=0,C=k;if(A&&(O=x(O,"y",""),-1===y(O,"g")&&(O+="g"),C=b(k,R.lastIndex),R.lastIndex>0&&(!R.multiline||R.multiline&&"\n"!==h(k,R.lastIndex-1))&&(T="(?: "+T+")",C=" "+C,_++),n=new RegExp("^(?:"+T+")",O)),I&&(n=new RegExp("^"+T+"$(?!\\s)",O)),m&&(i=R.lastIndex),s=r(v,A?n:R,C),A?s?(s.input=b(s.input,_),s[0]=b(s[0],_),s.index=R.lastIndex,R.lastIndex+=s[0].length):R.lastIndex=0:m&&s&&(R.lastIndex=R.global?s.index+s[0].length:i),I&&s&&s.length>1&&r(p,s[0],n,(function(){for(u=1;u<arguments.length-2;u++)void 0===arguments[u]&&(s[u]=void 0)})),s&&Z)for(s.groups=d=c(null),u=0;u<Z.length;u++)f=Z[u],d[f[0]]=s[f[1]];return s}),t.exports=g},7066:function(t,e,n){"use strict";var r=n(9670);t.exports=function(){var t=r(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.dotAll&&(e+="s"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e}},2999:function(t,e,n){var r=n(7293),i=n(7854),o=i.RegExp,a=r((function(){var t=o("a","y");return t.lastIndex=2,null!=t.exec("abcd")})),s=a||r((function(){return!o("a","y").sticky})),u=a||r((function(){var t=o("^r","gy");return t.lastIndex=2,null!=t.exec("str")}));t.exports={BROKEN_CARET:u,MISSED_STICKY:s,UNSUPPORTED_Y:a}},9441:function(t,e,n){var r=n(7293),i=n(7854),o=i.RegExp;t.exports=r((function(){var t=o(".","s");return!(t.dotAll&&t.exec("\n")&&"s"===t.flags)}))},7168:function(t,e,n){var r=n(7293),i=n(7854),o=i.RegExp;t.exports=r((function(){var t=o("(?<a>b)","g");return"b"!==t.exec("b").groups.a||"bc"!=="b".replace(t,"$<a>c")}))},1038:function(t,e,n){var r=n(2109),i=n(8457),o=n(7072),a=!o((function(t){Array.from(t)}));r({target:"Array",stat:!0,forced:a},{from:i})},7042:function(t,e,n){"use strict";var r=n(2109),i=n(7854),o=n(3157),a=n(4411),s=n(111),u=n(1400),c=n(6244),l=n(5656),d=n(6135),f=n(5112),p=n(1194),v=n(206),g=p("slice"),h=f("species"),y=i.Array,x=Math.max;r({target:"Array",proto:!0,forced:!g},{slice:function(t,e){var n,r,i,f=l(this),p=c(f),g=u(t,p),b=u(void 0===e?p:e,p);if(o(f)&&(n=f.constructor,a(n)&&(n===y||o(n.prototype))?n=void 0:s(n)&&(n=n[h],null===n&&(n=void 0)),n===y||void 0===n))return v(f,g,b);for(r=new(void 0===n?y:n)(x(b-g,0)),i=0;g<b;g++,i++)g in f&&d(r,i,f[g]);return r.length=i,r}})},8309:function(t,e,n){var r=n(9781),i=n(6530).EXISTS,o=n(1702),a=n(3070).f,s=Function.prototype,u=o(s.toString),c=/function\b(?:\s|\/\*[\S\s]*?\*\/|\/\/[^\n\r]*[\n\r]+)*([^\s(/]*)/,l=o(c.exec),d="name";r&&!i&&a(s,d,{configurable:!0,get:function(){try{return l(c,u(this))[1]}catch(t){return""}}})},4916:function(t,e,n){"use strict";var r=n(2109),i=n(2261);r({target:"RegExp",proto:!0,forced:/./.exec!==i},{exec:i})},7601:function(t,e,n){"use strict";n(4916);var r=n(2109),i=n(7854),o=n(6916),a=n(1702),s=n(614),u=n(111),c=function(){var t=!1,e=/[ac]/;return e.exec=function(){return t=!0,/./.exec.apply(this,arguments)},!0===e.test("abc")&&t}(),l=i.Error,d=a(/./.test);r({target:"RegExp",proto:!0,forced:!c},{test:function(t){var e=this.exec;if(!s(e))return d(this,t);var n=o(e,this,t);if(null!==n&&!u(n))throw new l("RegExp exec method returned something other than an Object or null");return!!n}})},9894:function(t,e,n){"use strict";var r;n.d(e,{b:function(){return r}}),function(t){t[t["OPEN"]=0]="OPEN",t[t["OPTIONS"]=1]="OPTIONS"}(r||(r={}))},2792:function(t,e,n){"use strict";n.d(e,{Z:function(){return l}});var r=n(2482),i=n(8534),o=n(3087),a=n(2833),s=(n(5666),n(1703),n(7627)),u=n(7663),c=n(8907),l=function(){function t(){(0,o.Z)(this,t),this.db=new c.B,this.store=s.h}return(0,a.Z)(t,[{key:"takeCar",value:function(){var t=(0,i.Z)(regeneratorRuntime.mark((function t(e,n,i){var o,a,s,c;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(o=this.store.state.firebase.user,a=(0,u.VF)((0,u.iH)(this.db.db)).key,!o){t.next=14;break}return s={},(0,r.Z)(s,"cars/".concat(i,"/out"),!0),(0,r.Z)(s,"cars/".concat(i,"/usedBy"),o.uid),(0,r.Z)(s,"users/".concat(o.uid,"/usingCar"),!0),(0,r.Z)(s,"users/".concat(o.uid,"/car"),i),(0,r.Z)(s,"users/".concat(o.uid,"/carReport"),a),(0,r.Z)(s,"carReports/".concat(a),{startOdometer:n,carId:i,startTime:new Date,userId:o.uid,userName:o.displayName,causal:e}),c=s,console.log(c),t.prev=5,t.next=8,this.db.updateValues(c);case 8:return t.abrupt("return",t.sent);case 11:t.prev=11,t.t0=t["catch"](5),console.log(t.t0);case 14:throw new Error("User not logged trying to update");case 15:case"end":return t.stop()}}),t,this,[[5,11]])})));function e(e,n,r){return t.apply(this,arguments)}return e}()},{key:"leaveCar",value:function(){var t=(0,i.Z)(regeneratorRuntime.mark((function t(e,n,i){var o,a,s,u,c;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(a=this.store.state.firebase.user,s=null===(o=this.store.state.appState.user)||void 0===o?void 0:o.carReport,!a||!s){t.next=14;break}return t.prev=3,u={},(0,r.Z)(u,"cars/".concat(n,"/out"),!1),(0,r.Z)(u,"cars/".concat(n,"/odometer"),e),(0,r.Z)(u,"cars/".concat(n,"/usedBy"),null),(0,r.Z)(u,"users/".concat(a.uid,"/usingCar"),!1),(0,r.Z)(u,"users/".concat(a.uid,"/car"),null),(0,r.Z)(u,"users/".concat(a.uid,"/carReport"),null),(0,r.Z)(u,"carReports/".concat(s,"/stopOdometer"),e),(0,r.Z)(u,"carReports/".concat(s,"/stopTime"),new Date),c=u,i&&(c["carReports/".concat(s,"/declarations")]=i),t.next=8,this.db.updateValues(c);case 8:return t.abrupt("return",t.sent);case 11:t.prev=11,t.t0=t["catch"](3),console.log(t.t0);case 14:throw new Error("User not logged trying to update");case 15:case"end":return t.stop()}}),t,this,[[3,11]])})));function e(e,n,r){return t.apply(this,arguments)}return e}()}]),t}()},976:function(t,e,n){"use strict";n.d(e,{Z:function(){return R}});var r=n(6252),i=n(3577),o=n(9963),a={id:"activity"},s={class:"title"},u={class:"question"},c={key:0,class:"options"},l=["name","id","onClick"],d={key:1,class:"open"},f=["onInput"],p={class:"divider"},v=["disabled"];function g(t,e,n,g,h,y){var x=this;return(0,r.wg)(),(0,r.iD)("div",a,[(0,r._)("div",s,[(0,r.WI)(t.$slots,"default",{},void 0,!0)]),((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(t.sections,(function(e,n){return(0,r.wg)(),(0,r.iD)("div",{class:"section",key:e.question},[(0,r._)("div",u,(0,i.zw)(e.question),1),e.type===t.sectionType.OPTIONS?((0,r.wg)(),(0,r.iD)("div",c,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(e.options,(function(t){return(0,r.wg)(),(0,r.iD)("label",{key:t.id,class:"opt"},[(0,r._)("input",{type:"radio",name:"section-".concat(n),id:t.id,onClick:function(n){return x.res[e.id]=t}},null,8,l),(0,r.Uk)(" "+(0,i.zw)(t.value),1)])})),128))])):((0,r.wg)(),(0,r.iD)("div",d,[(0,r._)("div",{class:"input",contenteditable:"true",onInput:function(t){return x.res[e.id]=t.target.innerText}},null,40,f)])),(0,r.wy)((0,r._)("div",p,null,512),[[o.F8,n<t.sections.length-1]])])})),128)),(0,r._)("div",{class:"submit_button",disabled:!t.submitActive,onClick:e[0]||(e[0]=function(){return t.onSubmit&&t.onSubmit.apply(t,arguments)})},(0,i.zw)(t.submitText),9,v)])}n(2526),n(1817),n(1539),n(2165),n(8783),n(3948),n(1703),n(7042),n(8309),n(1038),n(4916),n(7601);function h(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function y(t,e){if(t){if("string"===typeof t)return h(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?h(t,e):void 0}}function x(t,e){var n="undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=y(t))||e&&t&&"number"===typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==n["return"]||n["return"]()}finally{if(s)throw o}}}}var b=n(9894),m=(0,r.aZ)({emits:["onSubmit"],props:{sections:{type:Array,required:!0},submitText:String},data:function(){var t={};return{res:t}},computed:{sectionType:function(){return b.b},submitActive:function(){var t,e=x(this.sections);try{for(e.s();!(t=e.n()).done;){var n=t.value;if(n.mandatory&&(!this.$data.res[n.id]||0===this.$data.res[n.id].length))return!1}}catch(r){e.e(r)}finally{e.f()}return!0}},methods:{onSubmit:function(){this.$emit("onSubmit",this.$data.res)}}}),w=n(3744);const I=(0,w.Z)(m,[["render",g],["__scopeId","data-v-dfb717d0"]]);var R=I}}]);
//# sourceMappingURL=281-legacy.5dbd4a6a.js.map