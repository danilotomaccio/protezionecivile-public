{"version":3,"file":"js/189.145d1ff7.js","mappings":"sMAEA,MACMA,EAAa,CAAEC,GAAI,cACnBC,EAAa,CAAEC,MAAO,cACtBC,EAAa,CAAED,MAAO,WACtBE,EAAa,CAAEF,MAAO,eACtBG,EAAa,CAAEH,MAAO,WACtBI,EAAa,CAAEJ,MAAO,eAEtB,SAAUK,EAAOC,EAAUC,EAAYC,EAAYC,EAAYC,EAAWC,GAC9E,OAAQC,EAAAA,EAAAA,OAAcC,EAAAA,EAAAA,IAAoB,MAAOhB,EAAY,EAC3DiB,EAAAA,EAAAA,GAAoB,KAAM,MAAMC,EAAAA,EAAAA,IAAiBT,EAAKU,GAAGC,YAAa,IACtEH,EAAAA,EAAAA,GAAoB,MAAOf,EAAY,EACrCe,EAAAA,EAAAA,GAAoB,MAAOb,EAAY,EACrCa,EAAAA,EAAAA,GAAoB,MAAOZ,GAAYa,EAAAA,EAAAA,IAAiBT,EAAKU,GAAGE,iBAAkB,IAClFJ,EAAAA,EAAAA,GAAoB,MAAO,CACzBd,MAAO,SACPmB,QAASZ,EAAO,KAAOA,EAAO,GAExC,IAAIa,IAAUd,EAAKe,aAAef,EAAKe,eAAeD,MAC3CL,EAAAA,EAAAA,IAAiBT,EAAKU,GAAGM,gBAAiB,MAE/CR,EAAAA,EAAAA,GAAoB,MAAOX,EAAY,EACrCW,EAAAA,EAAAA,GAAoB,MAAOV,GAAYW,EAAAA,EAAAA,IAAiBT,EAAKU,GAAGO,kBAAmB,IACnFT,EAAAA,EAAAA,GAAoB,MAAO,CACzBd,MAAO,SACPmB,QAASZ,EAAO,KAAOA,EAAO,GAAK,IAAMiB,KAAKC,QAAQC,KAAK,2BAC1DX,EAAAA,EAAAA,IAAiBT,EAAKU,GAAGW,eAAgB,S,cC1B9C,MAAOC,EAETC,aAAaC,GACT,MAAMC,EAAkB,CACtB,QACA,YACA,WACA,gBACA,eACA,SACA,WACA,SACA,gBAEF,IAAIC,EACF,KAAOD,EAAgBE,QAAO,CAACC,EAAGC,IAAOD,EAAK,IAAIC,KAAM,IAAM,KAChE,IAAK,MAAMC,KAAYN,EAAS,CAC9BE,GAAO,GAAGI,IACV,MAAMC,EAAMP,EAAQM,GACpB,IAAK,MAAME,KAASP,EAAiB,CACnC,MAAMQ,EAAQF,EAAIC,GAClBN,GAAO,IAAIO,GAAgB,KAE7BP,GAAO,KAET,OAAOA,GCtBf,OAAeQ,EAAAA,EAAAA,IAAgB,CAC7BC,QAAS,CACPC,oBACE,MAAMC,EAAkB,IAAIC,EAAAA,EACtBC,QAAaF,EAAgBG,SACjC,cAEF,GAAID,EAAM,CACR,MAAME,GAAa,IAAInB,GAAgBC,aAAagB,GACpDrB,KAAKwB,aAAa,aAAcD,KAGpCC,aAAaC,EAAkBC,GAC7B,MAAMC,EAAUC,SAASC,cAAc,KACvCF,EAAQG,aACN,OACA,iCAAmCC,mBAAmBL,IAExDC,EAAQG,aAAa,WAAYL,GACjCE,EAAQK,MAAMC,QAAU,OACxBL,SAASM,KAAKC,YAAYR,GAC1BA,EAAQS,QACRR,SAASM,KAAKG,YAAYV,O,UCpBhC,MAAMW,GAA2B,OAAgB,EAAQ,CAAC,CAAC,SAASzD,GAAQ,CAAC,YAAY,qBAEzF","sources":["webpack://protezione-civile/./src/views/AdminHome.vue?d15f","webpack://protezione-civile/./src/services/ReportService.ts","webpack://protezione-civile/./src/views/AdminHome.vue?5a60","webpack://protezione-civile/./src/views/AdminHome.vue"],"sourcesContent":["import { toDisplayString as _toDisplayString, createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-01d617ce\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = { id: \"admin_home\" }\nconst _hoisted_2 = { class: \"activities\" }\nconst _hoisted_3 = { class: \"section\" }\nconst _hoisted_4 = { class: \"description\" }\nconst _hoisted_5 = { class: \"section\" }\nconst _hoisted_6 = { class: \"description\" }\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n    _createElementVNode(\"h2\", null, _toDisplayString(_ctx.$t.adminTitle), 1),\n    _createElementVNode(\"div\", _hoisted_2, [\n      _createElementVNode(\"div\", _hoisted_3, [\n        _createElementVNode(\"div\", _hoisted_4, _toDisplayString(_ctx.$t.csvDownloadDesc), 1),\n        _createElementVNode(\"div\", {\n          class: \"button\",\n          onClick: _cache[0] || (_cache[0] = \n//@ts-ignore\n(...args) => (_ctx.downloadCSV && _ctx.downloadCSV(...args)))\n        }, _toDisplayString(_ctx.$t.csvDownloadBtn), 1)\n      ]),\n      _createElementVNode(\"div\", _hoisted_5, [\n        _createElementVNode(\"div\", _hoisted_6, _toDisplayString(_ctx.$t.notificationDesc), 1),\n        _createElementVNode(\"div\", {\n          class: \"button\",\n          onClick: _cache[1] || (_cache[1] = () => this.$router.push('/admin/notifications'))\n        }, _toDisplayString(_ctx.$t.goToAdminPush), 1)\n      ])\n    ])\n  ]))\n}","import { CarReport } from \"@/model/CarReport\";\n\nexport class ReportService {\n\n    reportsToCSV(reports: { [key: string]: CarReport }) {\n        const carReportFields = [\n          \"carId\",\n          \"startTime\",\n          \"stopTime\",\n          \"startOdometer\",\n          \"stopOdometer\",\n          \"userId\",\n          \"userName\",\n          \"causal\",\n          \"declarations\",\n        ];\n        let res =\n          \"id\" + carReportFields.reduce((p, f) => (p += `,${f}`), \"\") + \"\\n\";\n        for (const reportId in reports) {\n          res += `${reportId}`;\n          const rep = reports[reportId];\n          for (const field of carReportFields) {\n            const value = rep[field as keyof CarReport];\n            res += `,${value ? value : \"\"}`;\n          }\n          res += \"\\n\";\n        }\n        return res;\n      }\n}","\nimport { FirebaseDBService } from \"@/services/FirebaseDBService\";\nimport { ReportService } from \"@/services/ReportService\";\nimport { defineComponent } from \"vue\";\nimport { CarReport } from \"@/model/CarReport\";\nexport default defineComponent({\n  methods: {\n    async downloadCSV() {\n      const firebaseService = new FirebaseDBService();\n      const data = await firebaseService.readData<{ [key: string]: CarReport }>(\n        \"carReports\"\n      );\n      if (data) {\n        const csvContent = new ReportService().reportsToCSV(data);\n        this.downloadFile(\"report.csv\", csvContent);\n      }\n    },\n    downloadFile(fileName: string, content: string) {\n      const element = document.createElement(\"a\");\n      element.setAttribute(\n        \"href\",\n        \"data:text/plain;charset=utf-8,\" + encodeURIComponent(content)\n      );\n      element.setAttribute(\"download\", fileName);\n      element.style.display = \"none\";\n      document.body.appendChild(element);\n      element.click();\n      document.body.removeChild(element);\n    },\n  },\n});\n","import { render } from \"./AdminHome.vue?vue&type=template&id=01d617ce&scoped=true&ts=true\"\nimport script from \"./AdminHome.vue?vue&type=script&lang=ts\"\nexport * from \"./AdminHome.vue?vue&type=script&lang=ts\"\n\nimport \"./AdminHome.vue?vue&type=style&index=0&id=01d617ce&lang=scss&scoped=true\"\n\nimport exportComponent from \"/Users/TomaccioD/Documents/other/protezione-civile/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-01d617ce\"]])\n\nexport default __exports__"],"names":["_hoisted_1","id","_hoisted_2","class","_hoisted_3","_hoisted_4","_hoisted_5","_hoisted_6","render","_ctx","_cache","$props","$setup","$data","$options","_openBlock","_createElementBlock","_createElementVNode","_toDisplayString","$t","adminTitle","csvDownloadDesc","onClick","args","downloadCSV","csvDownloadBtn","notificationDesc","this","$router","push","goToAdminPush","ReportService","reportsToCSV","reports","carReportFields","res","reduce","p","f","reportId","rep","field","value","defineComponent","methods","async","firebaseService","FirebaseDBService","data","readData","csvContent","downloadFile","fileName","content","element","document","createElement","setAttribute","encodeURIComponent","style","display","body","appendChild","click","removeChild","__exports__"],"sourceRoot":""}