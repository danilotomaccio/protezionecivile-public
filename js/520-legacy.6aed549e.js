(self["webpackChunkprotezione_civile"]=self["webpackChunkprotezione_civile"]||[]).push([[520],{8457:function(t,r,e){"use strict";var n=e(7854),i=e(9974),o=e(6916),a=e(7908),s=e(3411),u=e(7659),c=e(4411),l=e(6244),d=e(6135),f=e(8554),p=e(1246),v=n.Array;t.exports=function(t){var r=a(t),e=c(this),n=arguments.length,h=n>1?arguments[1]:void 0,y=void 0!==h;y&&(h=i(h,n>2?arguments[2]:void 0));var m,b,g,w,Z,x,k=p(r),I=0;if(!k||this==v&&u(k))for(m=l(r),b=e?new this(m):v(m);m>I;I++)x=y?h(r[I],I):r[I],d(b,I,x);else for(w=f(r,k),Z=w.next,b=e?new this:[];!(g=o(Z,w)).done;I++)x=y?s(w,h,[g.value,I],!0):g.value,d(b,I,x);return b.length=I,b}},3411:function(t,r,e){var n=e(9670),i=e(9212);t.exports=function(t,r,e,o){try{return o?r(n(e)[0],e[1]):r(e)}catch(a){i(t,"throw",a)}}},1038:function(t,r,e){var n=e(2109),i=e(8457),o=e(7072),a=!o((function(t){Array.from(t)}));n({target:"Array",stat:!0,forced:a},{from:i})},7042:function(t,r,e){"use strict";var n=e(2109),i=e(7854),o=e(3157),a=e(4411),s=e(111),u=e(1400),c=e(6244),l=e(5656),d=e(6135),f=e(5112),p=e(1194),v=e(206),h=p("slice"),y=f("species"),m=i.Array,b=Math.max;n({target:"Array",proto:!0,forced:!h},{slice:function(t,r){var e,n,i,f=l(this),p=c(f),h=u(t,p),g=u(void 0===r?p:r,p);if(o(f)&&(e=f.constructor,a(e)&&(e===m||o(e.prototype))?e=void 0:s(e)&&(e=e[y],null===e&&(e=void 0)),e===m||void 0===e))return v(f,h,g);for(n=new(void 0===e?m:e)(b(g-h,0)),i=0;h<g;h++,i++)h in f&&d(n,i,f[h]);return n.length=i,n}})},7601:function(t,r,e){"use strict";e(4916);var n=e(2109),i=e(7854),o=e(6916),a=e(1702),s=e(614),u=e(111),c=function(){var t=!1,r=/[ac]/;return r.exec=function(){return t=!0,/./.exec.apply(this,arguments)},!0===r.test("abc")&&t}(),l=i.Error,d=a(/./.test);n({target:"RegExp",proto:!0,forced:!c},{test:function(t){var r=this.exec;if(!s(r))return d(this,t);var e=o(r,this,t);if(null!==e&&!u(e))throw new l("RegExp exec method returned something other than an Object or null");return!!e}})},9894:function(t,r,e){"use strict";var n;e.d(r,{b:function(){return n}}),function(t){t[t["OPEN"]=0]="OPEN",t[t["OPTIONS"]=1]="OPTIONS"}(n||(n={}))},2792:function(t,r,e){"use strict";e.d(r,{Z:function(){return l}});var n=e(2482),i=e(8534),o=e(3087),a=e(2833),s=(e(5666),e(1703),e(7627)),u=e(7663),c=e(8907),l=function(){function t(){(0,o.Z)(this,t),this.db=new c.B,this.store=s.h}return(0,a.Z)(t,[{key:"takeCar",value:function(){var t=(0,i.Z)(regeneratorRuntime.mark((function t(r,e,i){var o,a,s,c,l;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(o=this.store.state.firebase.user,a=(0,u.VF)((0,u.iH)(this.db.db)).key,!o){t.next=16;break}return s={},(0,n.Z)(s,"cars/".concat(i,"/out"),!0),(0,n.Z)(s,"cars/".concat(i,"/usedBy"),o.uid),(0,n.Z)(s,"users/".concat(o.uid,"/usingCar"),!0),(0,n.Z)(s,"users/".concat(o.uid,"/car"),i),(0,n.Z)(s,"users/".concat(o.uid,"/carReport"),a),(0,n.Z)(s,"carReports/".concat(a),{startOdometer:e,carId:i,startTime:new Date,userId:o.uid,userName:o.displayName,causal:r}),c=s,console.log(c),t.prev=5,t.next=8,this.db.updateValues(c);case 8:return l=t.sent,t.abrupt("return",l);case 12:t.prev=12,t.t0=t["catch"](5),console.error(t.t0),console.error(c);case 16:throw new Error("User not logged trying to update");case 17:case"end":return t.stop()}}),t,this,[[5,12]])})));function r(r,e,n){return t.apply(this,arguments)}return r}()},{key:"leaveCar",value:function(){var t=(0,i.Z)(regeneratorRuntime.mark((function t(r,e,i){var o,a,s,u,c,l;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(a=this.store.state.firebase.user,s=null===(o=this.store.state.appState.user)||void 0===o?void 0:o.carReport,!a||!s){t.next=16;break}return u={},(0,n.Z)(u,"cars/".concat(e,"/out"),!1),(0,n.Z)(u,"cars/".concat(e,"/odometer"),r),(0,n.Z)(u,"cars/".concat(e,"/usedBy"),null),(0,n.Z)(u,"users/".concat(a.uid,"/usingCar"),!1),(0,n.Z)(u,"users/".concat(a.uid,"/car"),null),(0,n.Z)(u,"users/".concat(a.uid,"/carReport"),null),(0,n.Z)(u,"carReports/".concat(s,"/stopOdometer"),r),(0,n.Z)(u,"carReports/".concat(s,"/stopTime"),new Date),c=u,i&&(c["carReports/".concat(s,"/declarations")]=i),t.prev=5,t.next=8,this.db.updateValues(c);case 8:return l=t.sent,t.abrupt("return",l);case 12:t.prev=12,t.t0=t["catch"](5),console.error(t.t0),console.error(c);case 16:throw new Error("User not logged trying to update");case 17:case"end":return t.stop()}}),t,this,[[5,12]])})));function r(r,e,n){return t.apply(this,arguments)}return r}()}]),t}()},521:function(t,r,e){"use strict";e.d(r,{Z:function(){return Z}});var n=e(6252),i=e(3577),o=e(9963),a={id:"activity"},s={class:"title"},u={class:"question"},c={key:0,class:"options"},l=["name","id","onClick"],d={key:1,class:"open"},f=["inputmode","onInput"],p={class:"divider"},v=["disabled"];function h(t,r,e,h,y,m){var b=this;return(0,n.wg)(),(0,n.iD)("div",a,[(0,n._)("div",s,[(0,n.WI)(t.$slots,"default",{},void 0,!0)]),((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(t.sections,(function(r,e){return(0,n.wg)(),(0,n.iD)("div",{class:"section",key:r.question},[(0,n._)("div",u,(0,i.zw)(r.question),1),r.type===t.sectionType.OPTIONS?((0,n.wg)(),(0,n.iD)("div",c,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(r.options,(function(t){return(0,n.wg)(),(0,n.iD)("label",{key:t.id,class:"opt"},[(0,n._)("input",{type:"radio",name:"section-".concat(e),id:t.id,onClick:function(e){return b.res[r.id]=t}},null,8,l),(0,n.Uk)(" "+(0,i.zw)(t.value),1)])})),128))])):((0,n.wg)(),(0,n.iD)("div",d,[(0,n._)("div",{class:"input",contenteditable:"true",inputmode:r.inputMode?r.inputMode:"text",onInput:function(e){return b.res[r.id]=t.parseInput(e.target.innerText,r)}},null,40,f)])),(0,n.wy)((0,n._)("div",p,null,512),[[o.F8,e<t.sections.length-1]])])})),128)),(0,n._)("div",{class:"submit_button",disabled:!t.submitActive,onClick:r[0]||(r[0]=function(){return t.onSubmit&&t.onSubmit.apply(t,arguments)})},(0,i.zw)(t.submitText),9,v)])}var y=e(8439),m=e(9894),b=(0,n.aZ)({emits:["onSubmit"],props:{sections:{type:Array,required:!0},submitText:String},data:function(){var t={},r={};return{res:t,errors:r}},computed:{sectionType:function(){return m.b},submitActive:function(){var t,r=(0,y.Z)(this.sections);try{for(r.s();!(t=r.n()).done;){var e=t.value;if(e.mandatory&&(!this.$data.res[e.id]||0===this.$data.res[e.id].length))return!1;if(this.errors[e.id])return!1}}catch(n){r.e(n)}finally{r.f()}return!0}},methods:{onSubmit:function(){this.$emit("onSubmit",this.$data.res)},parseInput:function(t,r){if(r.type===m.b.OPEN&&r.inputMode){var e=r.inputMode;if("numeric"===e){var n=parseInt(t);return isNaN(n)?(this.errors[r.id]=!0,null):(this.errors[r.id]=!1,n)}if("decimal"===e){var i=parseFloat(t);return isNaN(i)?(this.errors[r.id]=!0,null):(this.errors[r.id]=!1,i)}}return t}}}),g=e(3744);const w=(0,g.Z)(b,[["render",h],["__scopeId","data-v-49618c39"]]);var Z=w},8439:function(t,r,e){"use strict";e.d(r,{Z:function(){return o}});e(2526),e(1817),e(1539),e(2165),e(8783),e(3948),e(1703),e(7042),e(8309),e(1038),e(4916),e(7601);function n(t,r){(null==r||r>t.length)&&(r=t.length);for(var e=0,n=new Array(r);e<r;e++)n[e]=t[e];return n}function i(t,r){if(t){if("string"===typeof t)return n(t,r);var e=Object.prototype.toString.call(t).slice(8,-1);return"Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?n(t,r):void 0}}function o(t,r){var e="undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!e){if(Array.isArray(t)||(e=i(t))||r&&t&&"number"===typeof t.length){e&&(t=e);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,u=!1;return{s:function(){e=e.call(t)},n:function(){var t=e.next();return s=t.done,t},e:function(t){u=!0,a=t},f:function(){try{s||null==e["return"]||e["return"]()}finally{if(u)throw a}}}}}}]);
//# sourceMappingURL=520-legacy.6aed549e.js.map