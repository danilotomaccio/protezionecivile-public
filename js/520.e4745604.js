(self["webpackChunkprotezione_civile"]=self["webpackChunkprotezione_civile"]||[]).push([[520],{1318:function(t,r,n){var e=n(5656),o=n(1400),i=n(6244),s=function(t){return function(r,n,s){var u,c=e(r),a=i(c),f=o(s,a);if(t&&n!=n){while(a>f)if(u=c[f++],u!=u)return!0}else for(;a>f;f++)if((t||f in c)&&c[f]===n)return t||f||0;return!t&&-1}};t.exports={includes:s(!0),indexOf:s(!1)}},7741:function(t,r,n){var e=n(1702),o=e("".replace),i=function(t){return String(Error(t).stack)}("zxcasd"),s=/\n\s*at [^:]*:[^\n]*/,u=s.test(i);t.exports=function(t,r){if(u&&"string"==typeof t)while(r--)t=o(t,s,"");return t}},9920:function(t,r,n){var e=n(2597),o=n(3887),i=n(1236),s=n(3070);t.exports=function(t,r,n){for(var u=o(r),c=s.f,a=i.f,f=0;f<u.length;f++){var p=u[f];e(t,p)||n&&e(n,p)||c(t,p,a(r,p))}}},748:function(t){t.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},2914:function(t,r,n){var e=n(7293),o=n(9114);t.exports=!e((function(){var t=Error("a");return!("stack"in t)||(Object.defineProperty(t,"stack",o(1,7)),7!==t.stack)}))},2109:function(t,r,n){var e=n(7854),o=n(1236).f,i=n(8880),s=n(1320),u=n(3505),c=n(9920),a=n(4705);t.exports=function(t,r){var n,f,p,l,d,v,h=t.target,y=t.global,m=t.stat;if(f=y?e:m?e[h]||u(h,{}):(e[h]||{}).prototype,f)for(p in r){if(d=r[p],t.noTargetGet?(v=o(f,p),l=v&&v.value):l=f[p],n=a(y?p:h+(m?".":"#")+p,t.forced),!n&&void 0!==l){if(typeof d==typeof l)continue;c(d,l)}(t.sham||l&&l.sham)&&i(d,"sham",!0),s(f,p,d,t)}}},2104:function(t,r,n){var e=n(4374),o=Function.prototype,i=o.apply,s=o.call;t.exports="object"==typeof Reflect&&Reflect.apply||(e?s.bind(i):function(){return s.apply(i,arguments)})},8361:function(t,r,n){var e=n(7854),o=n(1702),i=n(7293),s=n(4326),u=e.Object,c=o("".split);t.exports=i((function(){return!u("z").propertyIsEnumerable(0)}))?function(t){return"String"==s(t)?c(t,""):u(t)}:u},9587:function(t,r,n){var e=n(614),o=n(111),i=n(7674);t.exports=function(t,r,n){var s,u;return i&&e(s=r.constructor)&&s!==n&&o(u=s.prototype)&&u!==n.prototype&&i(t,u),t}},8340:function(t,r,n){var e=n(111),o=n(8880);t.exports=function(t,r){e(r)&&"cause"in r&&o(t,"cause",r.cause)}},4705:function(t,r,n){var e=n(7293),o=n(614),i=/#|\.prototype\./,s=function(t,r){var n=c[u(t)];return n==f||n!=a&&(o(r)?e(r):!!r)},u=s.normalize=function(t){return String(t).replace(i,".").toLowerCase()},c=s.data={},a=s.NATIVE="N",f=s.POLYFILL="P";t.exports=s},6277:function(t,r,n){var e=n(1340);t.exports=function(t,r){return void 0===t?arguments.length<2?"":r:e(t)}},1236:function(t,r,n){var e=n(9781),o=n(6916),i=n(5296),s=n(9114),u=n(5656),c=n(4948),a=n(2597),f=n(6177),p=Object.getOwnPropertyDescriptor;r.f=e?p:function(t,r){if(t=u(t),r=c(r),f)try{return p(t,r)}catch(n){}if(a(t,r))return s(!o(i.f,t,r),t[r])}},8006:function(t,r,n){var e=n(6324),o=n(748),i=o.concat("length","prototype");r.f=Object.getOwnPropertyNames||function(t){return e(t,i)}},5181:function(t,r){r.f=Object.getOwnPropertySymbols},6324:function(t,r,n){var e=n(1702),o=n(2597),i=n(5656),s=n(1318).indexOf,u=n(3501),c=e([].push);t.exports=function(t,r){var n,e=i(t),a=0,f=[];for(n in e)!o(u,n)&&o(e,n)&&c(f,n);while(r.length>a)o(e,n=r[a++])&&(~s(f,n)||c(f,n));return f}},5296:function(t,r){"use strict";var n={}.propertyIsEnumerable,e=Object.getOwnPropertyDescriptor,o=e&&!n.call({1:2},1);r.f=o?function(t){var r=e(this,t);return!!r&&r.enumerable}:n},3887:function(t,r,n){var e=n(5005),o=n(1702),i=n(8006),s=n(5181),u=n(9670),c=o([].concat);t.exports=e("Reflect","ownKeys")||function(t){var r=i.f(u(t)),n=s.f;return n?c(r,n(t)):r}},1400:function(t,r,n){var e=n(9303),o=Math.max,i=Math.min;t.exports=function(t,r){var n=e(t);return n<0?o(n+r,0):i(n,r)}},5656:function(t,r,n){var e=n(8361),o=n(4488);t.exports=function(t){return e(o(t))}},1340:function(t,r,n){var e=n(7854),o=n(648),i=e.String;t.exports=function(t){if("Symbol"===o(t))throw TypeError("Cannot convert a Symbol value to a string");return i(t)}},9191:function(t,r,n){"use strict";var e=n(5005),o=n(2597),i=n(8880),s=n(7976),u=n(7674),c=n(9920),a=n(9587),f=n(6277),p=n(8340),l=n(7741),d=n(2914),v=n(1913);t.exports=function(t,r,n,h){var y=h?2:1,m=t.split("."),b=m[m.length-1],g=e.apply(null,m);if(g){var w=g.prototype;if(!v&&o(w,"cause")&&delete w.cause,!n)return g;var x=e("Error"),O=r((function(t,r){var n=f(h?r:t,void 0),e=h?new g(t):new g;return void 0!==n&&i(e,"message",n),d&&i(e,"stack",l(e.stack,2)),this&&s(w,this)&&a(e,this,O),arguments.length>y&&p(e,arguments[y]),e}));if(O.prototype=w,"Error"!==b&&(u?u(O,x):c(O,x,{name:!0})),c(O,g),!v)try{w.name!==b&&i(w,"name",b),w.constructor=O}catch(E){}return O}}},1703:function(t,r,n){var e=n(2109),o=n(7854),i=n(2104),s=n(9191),u="WebAssembly",c=o[u],a=7!==Error("e",{cause:7}).cause,f=function(t,r){var n={};n[t]=s(t,r,a),e({global:!0,forced:a},n)},p=function(t,r){if(c&&c[t]){var n={};n[t]=s(u+"."+t,r,a),e({target:u,stat:!0,forced:a},n)}};f("Error",(function(t){return function(r){return i(t,this,arguments)}})),f("EvalError",(function(t){return function(r){return i(t,this,arguments)}})),f("RangeError",(function(t){return function(r){return i(t,this,arguments)}})),f("ReferenceError",(function(t){return function(r){return i(t,this,arguments)}})),f("SyntaxError",(function(t){return function(r){return i(t,this,arguments)}})),f("TypeError",(function(t){return function(r){return i(t,this,arguments)}})),f("URIError",(function(t){return function(r){return i(t,this,arguments)}})),p("CompileError",(function(t){return function(r){return i(t,this,arguments)}})),p("LinkError",(function(t){return function(r){return i(t,this,arguments)}})),p("RuntimeError",(function(t){return function(r){return i(t,this,arguments)}}))},9894:function(t,r,n){"use strict";var e;n.d(r,{b:function(){return e}}),function(t){t[t["OPEN"]=0]="OPEN",t[t["OPTIONS"]=1]="OPTIONS"}(e||(e={}))},2792:function(t,r,n){"use strict";n.d(r,{Z:function(){return s}});n(1703);var e=n(7627),o=n(7663),i=n(8907);class s{constructor(){this.db=new i.B,this.store=e.h}async takeCar(t,r,n){const e=this.store.state.firebase.user,i=(0,o.VF)((0,o.iH)(this.db.db)).key;if(e){const o={[`cars/${n}/out`]:!0,[`cars/${n}/usedBy`]:e.uid,[`users/${e.uid}/usingCar`]:!0,[`users/${e.uid}/car`]:n,[`users/${e.uid}/carReport`]:i,[`carReports/${i}`]:{startOdometer:r,carId:n,startTime:new Date,userId:e.uid,userName:e.displayName,causal:t}};console.log(o);try{const t=await this.db.updateValues(o);return t}catch(s){console.error(s),console.error(o)}}throw new Error("User not logged trying to update")}async leaveCar(t,r,n){const e=this.store.state.firebase.user,o=this.store.state.appState.user?.carReport;if(e&&o){const s={[`cars/${r}/out`]:!1,[`cars/${r}/odometer`]:t,[`cars/${r}/usedBy`]:null,[`users/${e.uid}/usingCar`]:!1,[`users/${e.uid}/car`]:null,[`users/${e.uid}/carReport`]:null,[`carReports/${o}/stopOdometer`]:t,[`carReports/${o}/stopTime`]:new Date};n&&(s[`carReports/${o}/declarations`]=n);try{const t=await this.db.updateValues(s);return t}catch(i){console.error(i),console.error(s)}}throw new Error("User not logged trying to update")}}},521:function(t,r,n){"use strict";n.d(r,{Z:function(){return w}});var e=n(6252),o=n(3577),i=n(9963);const s={id:"activity"},u={class:"title"},c={class:"question"},a={key:0,class:"options"},f=["name","id","onClick"],p={key:1,class:"open"},l=["inputmode","onInput"],d={class:"divider"},v=["disabled"];function h(t,r,n,h,y,m){return(0,e.wg)(),(0,e.iD)("div",s,[(0,e._)("div",u,[(0,e.WI)(t.$slots,"default",{},void 0,!0)]),((0,e.wg)(!0),(0,e.iD)(e.HY,null,(0,e.Ko)(t.sections,((r,n)=>((0,e.wg)(),(0,e.iD)("div",{class:"section",key:r.question},[(0,e._)("div",c,(0,o.zw)(r.question),1),r.type===t.sectionType.OPTIONS?((0,e.wg)(),(0,e.iD)("div",a,[((0,e.wg)(!0),(0,e.iD)(e.HY,null,(0,e.Ko)(r.options,(t=>((0,e.wg)(),(0,e.iD)("label",{key:t.id,class:"opt"},[(0,e._)("input",{type:"radio",name:`section-${n}`,id:t.id,onClick:n=>this.res[r.id]=t},null,8,f),(0,e.Uk)(" "+(0,o.zw)(t.value),1)])))),128))])):((0,e.wg)(),(0,e.iD)("div",p,[(0,e._)("div",{class:"input",contenteditable:"true",inputmode:r.inputMode?r.inputMode:"text",onInput:n=>this.res[r.id]=t.parseInput(n.target.innerText,r)},null,40,l)])),(0,e.wy)((0,e._)("div",d,null,512),[[i.F8,n<t.sections.length-1]])])))),128)),(0,e._)("div",{class:"submit_button",disabled:!t.submitActive,onClick:r[0]||(r[0]=(...r)=>t.onSubmit&&t.onSubmit(...r))},(0,o.zw)(t.submitText),9,v)])}var y=n(9894),m=(0,e.aZ)({emits:["onSubmit"],props:{sections:{type:Array,required:!0},submitText:String},data(){const t={},r={};return{res:t,errors:r}},computed:{sectionType:()=>y.b,submitActive(){for(const t of this.sections){if(t.mandatory&&(!this.$data.res[t.id]||0===this.$data.res[t.id].length))return!1;if(this.errors[t.id])return!1}return!0}},methods:{onSubmit(){this.$emit("onSubmit",this.$data.res)},parseInput(t,r){if(r.type===y.b.OPEN&&r.inputMode){const n=r.inputMode;if("numeric"===n){const n=parseInt(t);return isNaN(n)?(this.errors[r.id]=!0,null):(this.errors[r.id]=!1,n)}if("decimal"===n){const n=parseFloat(t);return isNaN(n)?(this.errors[r.id]=!0,null):(this.errors[r.id]=!1,n)}}return t}}}),b=n(3744);const g=(0,b.Z)(m,[["render",h],["__scopeId","data-v-49618c39"]]);var w=g}}]);
//# sourceMappingURL=520.e4745604.js.map